Set AðŸŒ Step 1 â€“ Create AWS EC2 Instances

Log in to the AWS Management Console.

Go to âž¡ï¸ EC2 â†’ Instances â†’ Launch Instance

Launch 3 Ubuntu 22.04 LTS instances (t2.micro, Free Tier OK).

Name them:

controller (Ansible Control Node)

web1 (Managed Node 1)

web2 (Managed Node 2)

Key pair: Create one (e.g., ansible-key.pem) â†’ download it.

Security Group:

Inbound rules â†’ allow ports 22 (SSH) and 80 (HTTP)

Outbound â†’ allow all.

Launch the instances âœ…

cd Downloads
scp -i "C:\Users\prach\Downloads\mykey.pem" "C:\Users\prach\Downloads\mykey.pem" ubuntu@3.108.236.202:/home/ubuntu/
ssh -i "mykey.pem" ubuntu@ec2-3-108-236-202.ap-south-1.compute.amazonaws.com    ---> of control node instance

sudo apt update -y
sudo apt install -y python3-pip
sudo apt install ansible -y
ansible --version

ssh-keygen -y -f ~/mykey.pem > ~/mykey.pub
chmod 400 ~/mykey.pem
ssh-keygen -y -f ~/mykey.pem > ~/mykey.pub
ssh -i ~/mykey.pem ubuntu@13.233.159.98 "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys" < ~/mykey.pub    
ssh -i ~/mykey.pem ec2-user@3.108.220.237 "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys" < ~/mykey.pub

mkdir ~/assignment4 && cd ~/assignment4
mkdir group_vars host_vars
nano ansible.cfg
[defaults]
inventory = ./inventory
private_key_file = ~/.ssh/ansible-key.pem
host_key_checking = False
nano inventory
[webservers]
web1 ansible_host=<web1-public-ip> ansible_user=ubuntu
web2 ansible_host=<web2-public-ip> ansible_user=ubuntu
ansible all -m ping
nano group_vars/all.yml
username: devuser
comment: "Default user for all web servers"
nano host_vars/web1.yml
username: adminuser
comment: "Admin user for web1 only"

nano create-user.yml
---
- hosts: all
  become: yes
  tasks:
    - name: Create user with host/group variables
      ansible.builtin.user:
        name: "{{ username }}"
        comment: "{{ comment }}"

    - name: Display confirmation message
      debug:
        msg: "User {{ username }} created on {{ inventory_hostname }}"
Run it:
ansible-playbook create-user.yml
